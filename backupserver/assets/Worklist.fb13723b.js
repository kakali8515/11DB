import{_ as W,aJ as E,H as U,r as k,o as h,c as _,p as g,a as e,k as d,t as o,b as f,w as c,v as C,aF as b,aK as B,F as I,s as A,a3 as S,l as O,ab as P,ac as M}from"./index.d6ed331f.js";import{C as Y}from"./Calender.32f04616.js";import{B as m}from"./BulkExportAndWorkListService.2295a247.js";import{_ as p}from"./ud-arrow-icon.5808a584.js";const j="/assets/worklist-icon.38f9a332.svg";const q={name:"Worklist",components:{Sidebar:E,Calender:Y},inject:["common"],data(){return{search_type:"",search_title_name:"",search_id_type:"",search_id:"",search_date:"",tiving_id:"",page:1,limit:25,total_records:0,chunkPage:{chunk:5},workingList:[],searchTypeList:[],searchIdTypeList:[],export_type:"",selectedIdArray:[],baseUrl:"https://elvndb-api.dvconsulting.org/api/v1/",selectExportOption:[{id:1,name:"JSON"},{id:2,name:"Excel"}],currentSelectedOption:0,isAllChecked:!1,datePlaceholder:"MM.DD.YYYY",sort_by:"",sort_order:""}},watch:{"common.state.SelectedLang":function(t,s){t&&t!=s&&this.getSearchTypeList(),this.getSearchIdTypeList(),this.getWorkList()}},mounted(){this.getSearchTypeList(),this.getSearchIdTypeList(),this.getWorkList()},methods:{getWorkListByValue(t){this.page=1,this.limit=t.target.value,this.getWorkList()},getWorkData(t){this.search_type=t},clickInternalPage(t){this.page=t,this.isAllChecked=!1,this.getWorkList()},getSearchDate(t){this.search_date=t},getSearchTypeList(){m.getSearchTypeList().then(t=>{t.status==200&&(this.searchTypeList=t.data.result)}).catch(t=>{})},getSearchIdTypeList(){m.getSearchIdTypeList().then(t=>{t.status==200&&(this.searchIdTypeList=t.data.result)}).catch(t=>{})},getWorkList(){let t={search_type:this.search_type,search_title_name:this.search_title_name,search_id_type:this.search_id_type,search_id:this.search_id,search_date:this.search_date,tiving_id:this.tiving_id,page:this.page,limit:this.limit,sort_by:this.sort_by,sort_order:this.sort_order};m.getworkList(t).then(s=>{if(s.status==200){this.workingList=s.data.data;for(let n=0;n<this.workingList.length;n++)this.workingList[n].no=(this.page-1)*this.limit+n+1,this.workingList[n].isChecked=!1;if(this.total_records=s.data.total_records,this.selectedIdArray.length>0)for(let n=0;n<this.workingList.length;n++)for(let u=0;u<this.selectedIdArray.length;u++)this.selectedIdArray[u].no==this.workingList[n].no&&(this.workingList[n].isChecked=!0)}}).catch(s=>{})},searchList(){this.page=1,this.isAllChecked=!1,this.selectedIdArray=[],this.workingList.forEach(t=>{t.isAllChecked=!1}),this.getWorkList()},resetList(){this.selectedIdArray=[],this.workingList.forEach(t=>{t.isAllChecked=!1}),this.page=1,this.isAllChecked=!1,this.search_type="",this.search_title_name="",this.search_id_type="",this.search_id="",this.search_date="",this.tiving_id="",this.getWorkList()},ExportworkList(){let t=[];if(this.selectedIdArray.length>0)for(let n=0;n<this.selectedIdArray.length;n++)t.push(this.selectedIdArray[n].unique_id);let s={export_type:this.export_type,search_type:this.search_type,search_title_name:this.search_title_name,search_id_type:this.search_id_type,search_id:this.search_id,search_date:this.search_date,tiving_id:this.tiving_id,selected_id:t};m.ExportBulkWorkList(s).then(n=>{if(n.status==200){const u=`${this.baseUrl}/download/file?url=${n.data.path}&ul=false`,l=document.createElement("a");l.href=u,l.setAttribute("download","DataBackup"),document.body.appendChild(l),l.click(),this.selectedIdArray=[],this.isAllChecked=!1,this.currentSelectedOption=0;for(let r=0;r<this.workingList.length;r++)this.workingList[r].isChecked=!1}}).catch(n=>{})},getSelectedId(t,s){s.isChecked=!s.isChecked,s.isChecked==!0?this.selectedIdArray.push(s):s.isChecked==!1&&this.selectedIdArray.splice(this.selectedIdArray.indexOf(s),1),this.selectedIdArray.length==this.workingList.length?this.isAllChecked=!0:this.isAllChecked=!1},getAllChecked(t){if(this.selectedIdArray=[],t.target.checked==!0){this.isAllChecked=!0;for(let s=0;s<this.workingList.length;s++)this.workingList[s].unique_id==""||this.workingList[s].unique_id==null?this.workingList[s].isChecked=!1:(this.workingList[s].isChecked=!0,this.selectedIdArray.push(this.workingList[s]))}else{this.isAllChecked=!1,this.selectedIdArray=[];for(let s=0;s<this.workingList.length;s++)this.workingList[s].isChecked=!1}},getExportWorkList(t){this.currentSelectedOption=t.target.value,t.target.value==1?this.export_type="json":t.target.value==2&&(this.export_type="xls"),this.ExportworkList()},sorting(t){this.sort_by!=t?(this.sort_by=t,this.sort_order="asc"):this.sort_order=="asc"?this.sort_order="desc":this.sort_order="asc",this.getWorkList()},dateformat(t){if(t)return U.utc(t).local().format("YYYY-MM-DD HH:mm:ss")}}},a=t=>(P("data-v-f9b25936"),t=t(),M(),t),N={class:"admin-otr"},x={class:"admin-right"},F={class:"heading"},H=a(()=>e("span",null,[e("img",{src:j,alt:""})],-1)),J={class:"cm-bck"},G={class:"frm-innr w-100"},K={class:"row-3"},R={class:"form-group"},z={class:"form-group"},Q=["placeholder"],X={class:"form-group"},Z={class:"id-otr"},$={class:"form-group"},ee=["placeholder"],te={class:"row-3"},se={class:"form-group"},ie={class:"input-date"},le={class:"form-group"},oe={class:"radio-innr"},re={class:"rdo"},ne=a(()=>e("span",{class:"checkmark"},null,-1)),ae={class:"rdo"},de=a(()=>e("span",{class:"checkmark"},null,-1)),ce={class:"rdo"},he=a(()=>e("span",{class:"checkmark"},null,-1)),ue={class:"btn-group"},_e=["value"],pe={class:"cm-bck mt-30"},ke={class:"material-sort"},ge={class:"sort-innr"},me={class:"frm-innr"},ye={class:"form-group"},ve={class:"frm-innr"},fe={class:"form-group mb-0"},be={value:"0",selected:""},Le=["value","disabled"],we={class:"table-inner-scroll"},Ce={class:"table-otr table-innr bulk-working-tbl last-col"},Ie={class:"check-innr"},Ae={class:"check-inn"},Se=["checked"],Te=a(()=>e("span",{class:"checkmark"},null,-1)),De={class:"data-hdr"},Ve=a(()=>e("img",{src:p,alt:""},null,-1)),We=[Ve],Ee={class:"data-hdr"},Ue=a(()=>e("img",{src:p,alt:""},null,-1)),Be=[Ue],Oe={class:"data-hdr"},Pe=a(()=>e("img",{src:p,alt:""},null,-1)),Me=[Pe],Ye={class:"data-hdr"},je=a(()=>e("img",{src:p,alt:""},null,-1)),qe=[je],Ne={class:"data-hdr"},xe=a(()=>e("img",{src:p,alt:""},null,-1)),Fe=[xe],He={class:"data-hdr"},Je=a(()=>e("img",{src:p,alt:""},null,-1)),Ge=[Je],Ke={class:"check-innr"},Re={class:"check-inn"},ze=["onUpdate:modelValue","onClick","disabled"],Qe=a(()=>e("span",{class:"checkmark"},null,-1)),Xe={class:"date-time"},Ze={key:1},$e={colspan:"8",class:"center"};function et(t,s,n,u,l,r){var w;const T=k("Sidebar"),L=k("Dropdown"),D=k("Calender"),V=k("pagination");return h(),_("div",N,[g(T),e("div",x,[e("h2",F,[H,d(o(t.$t("bulk.worklist.header")),1)]),e("div",J,[e("h3",null,o(t.$t("button.search")),1),e("div",G,[e("div",K,[e("div",R,[e("label",null,o(t.$t("bulk.worklist.type")),1),f(` <select class="form-control" v-model="search_type">\r
                <option value="" selected>{{ $t("dictionary.select") }}</option>\r
                <option v-for="(type, i) in searchTypeList" :key="i" :value="i">\r
                  {{ type }}\r
                </option>\r
              </select> `),g(L,{onDropdownValue:r.getWorkData,search_type:l.search_type,searchTitleListItem:[{key:"",value:t.$t("dictionary.select"),disabled:!0},...Object.keys(l.searchTypeList).map(i=>({key:i,value:l.searchTypeList[i]}))],searchtitle:"value",searchvalue:"key"},null,8,["onDropdownValue","search_type","searchTitleListItem"])]),e("div",z,[e("label",null,o(t.$t("bulk.worklist.title")),1),c(e("input",{type:"text",placeholder:t.$t("bulk.worklist.titleText"),class:"form-control","onUpdate:modelValue":s[0]||(s[0]=i=>l.search_title_name=i)},null,8,Q),[[C,l.search_title_name]])]),e("div",X,[e("label",null,o(t.$t("bulk.worklist.id")),1),e("div",Z,[e("div",$,[f(` <select class="form-control" v-model="search_id_type">\r
                  <option value="" selected>\r
                    {{ $t("dictionary.select") }}\r
                  </option>\r
                  <option\r
                    v-for="(id, i) in searchIdTypeList"\r
                    :key="i"\r
                    :value="i"\r
                  >\r
                    {{ id }}\r
                  </option>\r
                </select>  `),g(L,{onDropdownValue:s[1]||(s[1]=i=>{l.search_id_type=i}),search_type:l.search_id_type,searchTitleListItem:[{key:"",value:t.$t("dictionary.select"),disabled:!0},...Object.keys(l.searchIdTypeList).map(i=>({key:i,value:l.searchIdTypeList[i]}))],searchtitle:"value",searchvalue:"key"},null,8,["search_type","searchTitleListItem"])]),c(e("input",{type:"text",placeholder:t.$t("bulk.worklist.idText"),class:"form-control","onUpdate:modelValue":s[2]||(s[2]=i=>l.search_id=i)},null,8,ee),[[C,l.search_id]])])])]),e("div",te,[e("div",se,[e("label",null,o(t.$t("bulk.worklist.modifiedDate")),1),e("div",ie,[g(D,{onDate:r.getSearchDate,input_date:l.search_date,datePlaceholder:l.datePlaceholder},null,8,["onDate","input_date","datePlaceholder"])])]),e("div",le,[e("label",null,o(t.$t("bulk.worklist.tivingId")),1),e("div",oe,[e("ul",null,[e("li",null,[e("label",re,[d(o(t.$t("bulk.worklist.all"))+" ",1),c(e("input",{type:"radio",name:"radio",value:"all","onUpdate:modelValue":s[3]||(s[3]=i=>l.tiving_id=i)},null,512),[[b,l.tiving_id]]),ne])]),e("li",null,[e("label",ae,[d(o(t.$t("bulk.worklist.exist"))+" ",1),c(e("input",{type:"radio",name:"radio",value:"exist","onUpdate:modelValue":s[4]||(s[4]=i=>l.tiving_id=i)},null,512),[[b,l.tiving_id]]),de])]),e("li",null,[e("label",ce,[d(o(t.$t("bulk.worklist.notExist"))+" ",1),c(e("input",{type:"radio",name:"radio",value:"not_exist","onUpdate:modelValue":s[5]||(s[5]=i=>l.tiving_id=i)},null,512),[[b,l.tiving_id]]),he])])])])])])]),e("div",ue,[e("input",{type:"submit",class:"btn org-btn",value:t.$t("button.search"),onClick:s[6]||(s[6]=(...i)=>r.searchList&&r.searchList(...i))},null,8,_e),e("button",{type:"button",class:"btn outline blk-btn",onClick:s[7]||(s[7]=(...i)=>r.resetList&&r.resetList(...i))},o(t.$t("button.reset")),1)])]),e("div",pe,[e("h3",null,o(t.$t("bulk.worklist.header")),1),e("div",ke,[e("div",ge,[e("p",null,o(t.$t("bulk.worklist.total"))+" "+o(l.total_records),1),e("div",me,[e("div",ye,[e("select",{class:"form-control",onChange:s[8]||(s[8]=i=>r.getWorkListByValue(i))},[e("option",null,o(t.$t("bulk.worklist.pageLimit25")),1),e("option",null,o(t.$t("bulk.worklist.pageLimit50")),1),e("option",null,o(t.$t("bulk.worklist.pageLimit75")),1)],32)])])]),e("div",ve,[e("div",fe,[c(e("select",{class:"form-control width-200",onChange:s[9]||(s[9]=i=>r.getExportWorkList(i)),"onUpdate:modelValue":s[10]||(s[10]=i=>l.currentSelectedOption=i)},[e("option",be,o(t.$t("dictionary.select")),1),(h(!0),_(I,null,A(l.selectExportOption,(i,y)=>(h(),_("option",{key:y,value:i.id,disabled:l.selectedIdArray.length==0},o(i.name),9,Le))),128))],544),[[B,l.currentSelectedOption]])])])]),e("div",we,[e("table",Ce,[e("thead",null,[e("tr",null,[e("th",null,[e("div",Ie,[e("label",Ae,[c(e("input",{type:"checkbox","onUpdate:modelValue":s[11]||(s[11]=i=>l.isAllChecked=i),onClick:s[12]||(s[12]=i=>r.getAllChecked(i)),checked:l.isAllChecked==!0},null,8,Se),[[S,l.isAllChecked]]),Te])])]),e("th",null,o(t.$t("dictionary.agentList.no")),1),e("th",null,[e("div",De,[d(o(t.$t("bulk.worklist.type"))+" ",1),e("span",{onClick:s[13]||(s[13]=i=>r.sorting("type"))},We)])]),e("th",null,[e("div",Ee,[d(o(t.$t("bulk.worklist.title"))+" ",1),e("span",{onClick:s[14]||(s[14]=i=>r.sorting("title"))},Be)])]),e("th",null,[e("div",Oe,[d(o(t.$t("bulk.worklist.id"))+" ",1),e("span",{onClick:s[15]||(s[15]=i=>r.sorting("unique_id"))},Me)])]),e("th",null,[e("div",Ye,[d(o(t.$t("bulk.worklist.modifiedDate"))+" ",1),e("span",{onClick:s[16]||(s[16]=i=>r.sorting("modified_date"))},qe)])]),e("th",null,[e("div",Ne,[d(o(t.$t("bulk.worklist.TIVINGID"))+" ",1),e("span",{onClick:s[17]||(s[17]=i=>r.sorting("tiving_id"))},Fe)])]),e("th",null,[e("div",He,[d(o(t.$t("bulk.worklist.worker"))+" ",1),e("span",{onClick:s[18]||(s[18]=i=>r.sorting("worker"))},Ge)])])])]),e("tbody",null,[l.workingList.length>0?(h(!0),_(I,{key:0},A(l.workingList,(i,y)=>(h(),_("tr",{key:y},[e("td",null,[e("div",Ke,[e("label",Re,[c(e("input",{type:"checkbox","onUpdate:modelValue":v=>i.isChecked=v,onClick:v=>r.getSelectedId(v,i),disabled:i.unique_id==""||i.unique_id==null},null,8,ze),[[S,i.isChecked]]),Qe])])]),e("td",null,o(i.no),1),e("td",null,o(i.type=="movie"?"Movies":i.type=="tv"?"TV":i.type=="people"?"People":i.type=="webtoons"?"Webtoons":""),1),e("td",null,o(i.title),1),e("td",null,o(i.unique_id),1),e("td",null,[e("ul",Xe,[e("li",null,o(r.dateformat(i.modified_date)),1)])]),e("td",null,o(i.tiving_id),1),e("td",null,o(i.worker),1)]))),128)):(h(),_("tr",Ze,[e("td",$e,[e("p",null,o(t.$t("dictionary.noData")),1)])]))])])]),((w=l.workingList)==null?void 0:w.length)>0?(h(),O(V,{key:0,modelValue:l.page,"onUpdate:modelValue":s[19]||(s[19]=i=>l.page=i),records:l.total_records,"per-page":l.limit,options:l.chunkPage,onPaginate:r.clickInternalPage},null,8,["modelValue","records","per-page","options","onPaginate"])):f("v-if",!0)])])])}const ot=W(q,[["render",et],["__scopeId","data-v-f9b25936"],["__file","D:/11-db-frontend/11_db/src/admin/views/BulkWorking/Worklist.vue"]]);export{ot as default};
