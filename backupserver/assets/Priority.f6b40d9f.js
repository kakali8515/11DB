import{R as _,_ as D,i as V,aJ as R,z as M,y as U,T as B,r as m,o as r,c as a,p as N,a as i,k as K,t as o,l as T,q as P,b as W,F as h,s as y,w as b,aK as g}from"./index.904f3d07.js";class E{async getPriorityList(e){return await _.get("/admin/priority",{params:{list_type:e}}).then(n=>n).catch(n=>n)}async getPrioritySetList(){return await _.get("/admin/priority/set-list").then(e=>e).catch(e=>e)}async savePriority(e){return await _.post("/admin/priority/save",{...e}).then(n=>n).catch(n=>n)}}const F="/assets/priority-icon.5d6374da.svg";V.global;const j={name:"Schema",components:{Sidebar:R,TabWrapper:M,Tabs:U},inject:["common"],data(){return{listType:"movie",priorityList:[],prioritySetList:{},titleList:[{title:"searchResults.searchRight.movieDetails.movie",value:"movie"},{title:"searchResults.searchRight.tvShows",value:"tv"},{title:"searchResults.searchRight.webtoons.title",value:"webtoons"},{title:"searchResults.stars",value:"people"}]}},created(){this.DataManagementService=new E},mounted(){this.getPriorityList(),this.getPrioritySetList()},watch:{"common.state.SelectedLang":function(t,e){t&&t!=e&&this.getPriorityList(),this.getPrioritySetList()}},methods:{getPriorityList(){this.DataManagementService.getPriorityList(this.listType).then(t=>{t.status==200&&(this.priorityList=t.data.results)}).catch(t=>{console.log(t)})},priorityChangedTmdb(t,e){e.target.value==2?(this.priorityList[t].tmdb_priority=e.target.value,this.priorityList[t].kobis_priority="3"):(this.priorityList[t].tmdb_priority=e.target.value,this.priorityList[t].kobis_priority="2")},priorityChangedKobis(t,e){e.target.value==2?(this.priorityList[t].kobis_priority=e.target.value,this.priorityList[t].tmdb_priority="3"):(this.priorityList[t].kobis_priority=e.target.value,this.priorityList[t].tmdb_priority="2")},getPrioritySetList(){this.DataManagementService.getPrioritySetList().then(t=>{t.status==200&&(this.prioritySetList=t.data.results)}).catch(t=>{console.log(t)})},onChangeTab(t){let e=this.titleList.find(n=>t==n.title);this.listType=e.value,this.getPriorityList()},savePriority(){let t={list_type:this.listType,priority:this.priorityList.map(e=>(delete e.field_name,e))};this.DataManagementService.savePriority(t).then(e=>{e.status==200&&(B.fire({title:this.$t("Error.success")}),this.getPriorityList())}).catch(e=>{console.log(e)})}}},q={class:"admin-otr"},z={class:"admin-right"},A={class:"heading"},J=i("span",null,[i("img",{src:F,alt:""})],-1),$={class:"cm-bck"},G={class:"tab-outr admin-tab"},H={class:"table-otr schema-table"},I=["onUpdate:modelValue"],O=["value"],Q=["onUpdate:modelValue","onChange"],X=["value","disabled"],Y=["onUpdate:modelValue","onChange"],Z=["value","disabled"],x={key:1},tt={colspan:"4"},et={class:"no-data-priority"},it={class:"btn-group mtt-30"};function st(t,e,n,rt,d,p){var v;const k=m("Sidebar"),C=m("Tabs"),w=m("TabWrapper");return r(),a("div",q,[N(k),i("div",z,[i("h2",A,[J,K(o(t.$t("priority.header")),1)]),i("div",$,[i("h3",null,o(t.$t("priority.listing")),1),i("div",G,[((v=d.titleList)==null?void 0:v.length)>0?(r(),T(w,{key:0,onSelectedTab:p.onChangeTab,priorityLoopTab:"true"},{default:P(()=>[(r(!0),a(h,null,y(d.titleList,L=>(r(),T(C,{title:L.title,key:L.value},{default:P(()=>[i("table",H,[i("thead",null,[i("tr",null,[i("th",null,o(t.$t("priority.data")),1),i("th",null,o(t.$t("priority.11db")),1),i("th",null,o(t.$t("priority.tmdb")),1),i("th",null,o(t.$t("priority.kobis")),1)])]),i("tbody",null,[d.priorityList.length?(r(!0),a(h,{key:0},y(d.priorityList,(l,u)=>{var f,S;return r(),a("tr",{key:u},[i("td",null,o(((f=l.field_name)==null?void 0:f.charAt(0).toUpperCase())+((S=l.field_name)==null?void 0:S.slice(1))),1),i("td",null,[b(i("select",{class:"form-control","onUpdate:modelValue":s=>l.eleven_db_priority=s,disabled:""},[(r(!0),a(h,null,y(d.prioritySetList,(s,c)=>(r(),a("option",{key:c,value:c},o(s),9,O))),128))],8,I),[[g,l.eleven_db_priority]])]),i("td",null,[b(i("select",{class:"form-control","onUpdate:modelValue":s=>l.tmdb_priority=s,onChange:s=>p.priorityChangedTmdb(u,s)},[(r(!0),a(h,null,y(d.prioritySetList,(s,c)=>(r(),a("option",{key:c,value:c,disabled:c=="1"},o(s),9,X))),128))],40,Q),[[g,l.tmdb_priority]])]),i("td",null,[b(i("select",{class:"form-control","onUpdate:modelValue":s=>l.kobis_priority=s,onChange:s=>p.priorityChangedKobis(u,s)},[(r(!0),a(h,null,y(d.prioritySetList,(s,c)=>(r(),a("option",{key:c,value:c,disabled:s=="1"},o(s),9,Z))),128))],40,Y),[[g,l.kobis_priority]])])])}),128)):(r(),a("tr",x,[i("td",tt,[i("span",et,o(t.$t("dictionary.noData")),1)])]))])]),i("div",it,[i("button",{type:"submit",class:"btn org-btn",onClick:e[0]||(e[0]=(...l)=>p.savePriority&&p.savePriority(...l))},o(t.$t("button.save")),1)])]),_:2},1032,["title"]))),128))]),_:1},8,["onSelectedTab"])):W("v-if",!0)])])])])}const at=D(j,[["render",st],["__file","D:/11-db-frontend/11_db/src/admin/views/DataManagement/Priority.vue"]]);export{at as default};
