import{_ as g,P as y,r as h,o as n,c as l,a as i,k as M,t as m,l as w,b as v,p as b,q as r,F as f,A as p,B as C}from"./index.904f3d07.js";import{_ as I}from"./play-btn.b7dd2e78.js";const T={name:"VideoCard",components:{PopUpModal:y},props:{video:Object},inject:["common"],data(){return{isImageModal:!1,selectedUrl:"",thumbnail:"",duration:0,host:"https://elvndb-frnt.dvconsulting.org",youtubeComponent:0,isVideo:!0,myTimeout:null}},watch:{"common.state.SelectedLang":function(e,t){e&&e!=t&&(this.myTimeout!=null&&(clearTimeout(this.myTimeout),this.myTimeout=null),this.isVideo=!1,this.delay(3e3))}},mounted(){setTimeout(()=>{this.youtubeComponent++},.1)},methods:{delay(e){this.myTimeout==null&&(this.myTimeout=setTimeout(()=>{this.isVideo=!0},e))},youtube_parser(e){if(e.type=="youtube"){let o=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,d=e.link.match(o);d&&(this.thumbnail=`https://img.youtube.com/vi/${d[1]}/hqdefault.jpg`)}else{let o=`https://vimeo.com/api/oembed.json?url=${e.link}`;var t=new XMLHttpRequest;t.open("GET",o,!0),t.send(),t.onreadystatechange=()=>{t.readyState==4&&t.status==200&&this.callback(t.response)}}},callback(e){var t=JSON.parse(e);this.thumbnail=t.thumbnail_url,this.duration=t.duration},openVideo(e){this.isImageModal=!0,e.type=="youtube"?this.selectedUrl="https://www.youtube.com/embed/"+e.videoid:this.selectedUrl=`https://player.vimeo.com/video/${e.videoid}`},secondsToHms(e){var t=Math.floor(e/3600);t>=1?e=e-t*3600:t="";var o=Math.floor(e/60);return o>=1?e=e-o*60:o="00",(e<1||e==null)&&(e="00"),o.toString().length==1&&(o="0"+o),e.toString().length==1&&(e="0"+e),t==""?o+":"+e:t+":"+o+":"+e},onReady(){this.$refs.youtube.setVolume(0),this.duration=this.$refs.youtube.getDuration()}}},V={class:"media-pic"},U={class:"img"},P=["src"],S=i("span",null,[i("img",{src:I,alt:""})],-1),j={class:"new-cast-modal add-img-modal new-media-modal"},B=i("img",{src:p,alt:""},null,-1),N=[B],R={class:"video-pannel"},D=["src"];function q(e,t,o,d,s,a){var _;const u=h("YouTube"),c=h("PopUpModal");return n(),l(f,null,[i("a",{onClick:t[0]||(t[0]=k=>a.openVideo(o.video)),class:"media-innr"},[i("div",V,[i("figure",U,[i("img",{src:a.youtube_parser(o.video)||s.thumbnail,alt:""},null,8,P)]),i("p",null,[S,M(" "+m(a.secondsToHms(s.duration)),1)])]),i("h5",null,m((_=o.video)==null?void 0:_.title),1)]),i("template",null,[o.video.type=="youtube"&&s.isVideo?(n(),w(u,{src:"https://www.youtube.com/embed/"+o.video.videoid+"?autoplay=0",onReady:a.onReady,ref:"youtube",key:s.youtubeComponent},null,8,["src","onReady"])):v("v-if",!0)]),i("div",j,[b(c,{isModal:s.isImageModal},{header:r(()=>[i("h1",null,m(e.$t("myPage.videoCard.videoPreview")),1),i("button",{onClick:t[1]||(t[1]=k=>s.isImageModal=!1)},N)]),body:r(()=>[i("div",R,[i("iframe",{src:s.selectedUrl,width:"100%",height:"100%",frameborder:"0",allow:"autoplay; fullscreen; picture-in-picture"},null,8,D)])]),_:1},8,["isModal"])])],64)}const Q=g(T,[["render",q],["__file","D:/11-db-frontend/11_db/src/components/MyPage/VideoCard.vue"]]),O={name:"ImageCard",props:{image:Object},components:{PopUpModal:y},data(){return{isImageModal:!1,selectedUrl:""}},methods:{openImage(e){this.isImageModal=!0,this.selectedUrl=e.link||e.image_link}}},E={class:"image-innr"},F=["src","alt"],L={key:1,src:C},Y={key:0,class:"new-cast-modal add-img-modal new-media-modal"},A=i("img",{src:p,alt:""},null,-1),G=[A],J={class:"modal-img-area"},X=["src","alt"];function $(e,t,o,d,s,a){const u=h("PopUpModal");return n(),l(f,null,[i("div",E,[i("a",{onClick:t[0]||(t[0]=c=>a.openImage(o.image))},[o.image.image_link||o.image.link.includes("https")?(n(),l("img",{key:0,src:o.image.link||o.image.image_link,alt:o.image.link||o.image.image_link},null,8,F)):(n(),l("img",L))])]),s.isImageModal?(n(),l("div",Y,[b(u,{isModal:s.isImageModal},{header:r(()=>[i("h1",null,m(e.$t("myPage.imageCard.imagePreview")),1),i("button",{onClick:t[1]||(t[1]=c=>s.isImageModal=!1)},G)]),body:r(()=>[i("div",J,[i("img",{src:s.selectedUrl,alt:s.selectedUrl},null,8,X)])]),_:1},8,["isModal"])])):v("v-if",!0)],64)}const W=g(O,[["render",$],["__file","D:/11-db-frontend/11_db/src/components/MyPage/ImageCard.vue"]]);export{W as I,Q as V};
