import{_ as Y,y as J,z as Q,U as x,V as W,N as X,O as Z,E as o,L as $,a6 as ee,G as ae,a7 as te,K as oe,r as b,o as i,c as d,p as S,q as I,a as r,t as f,k as se,b as w,F as H,s as O,l as j}from"./index.ace3f588.js";import{B as ie}from"./BannerCardTwo.2c302fff.js";import{V as ne,I as le}from"./ImageCard.f0d09581.js";import{P as de}from"./PosterCard.e0af8418.js";import{T as q}from"./TVShowsDetailsService.2b588334.js";import"./left-arrow-gray.5b681dc2.js";import"./play-btn.b7dd2e78.js";const re={name:"TvShowMedia",emits:["on-current-theme-change"],components:{Tabs:J,TabWrapper:Q,BannerCardTwo:ie,VideoCard:ne,ImageCard:le,PosterCard:de},mixins:[x,W],setup(){const m=X(),M=Z(),k=o(""),a=o(""),c=o([]),B=o(0),y=o([]),N=o(0),v=o([]),C=o(0),s=m.params.id,h=o(""),l=m.params.season_id,u=o(""),V=o([]),D=o([]),P=o([]),F=o(1),g=o("addNewPeople.mediadetails.videoTitle"),z=$("common"),p=o(!1),E=async(t,n)=>{let R={id:Number(t),season_id:Number(l),type:"video",page:n,limit:20};try{let e=await q.getMediaDetails(R);e.status==200&&(p.value=!0,c.value=e.data.tv_season_meadia_list,Array.from(e.data.tv_season_meadia_list).forEach((_,T)=>{c.value[T].videoid=W(_.video_link)||x(_.video_link),c.value[T].link=_.video_link,c.value[T].title=_.video_name,W(_.video_link)?c.value[T].type="vimeo":c.value[T].type="youtube"}),B.value=e.data.total_records,D.value.push(...c.value),k.value=e.data.title_poster_image,a.value=e.data.title_name,h.value=e.data.background_image?e.data.background_image:e.data.title_poster_image?e.data.title_poster_image:"",u.value=e.data.season_name,setTimeout(()=>{p.value=!1},1e3))}catch(e){console.warn(e)}},L=async(t,n)=>{let R={id:Number(t),season_id:Number(l),type:"image",page:n,limit:10};try{let e=await q.getMediaDetails(R);e.status==200&&(p.value=!0,y.value=e.data.tv_season_meadia_list,N.value=e.data.total_records,u.value=e.data.season_name,a.value=e.data.title_name,k.value=e.data.title_poster_image,V.value.push(...y.value),h.value=e.data.background_image?e.data.background_image:e.data.title_poster_image?e.data.title_poster_image:"",setTimeout(()=>{p.value=!1},1e3))}catch(e){console.warn(e)}},A=async(t,n)=>{let R={id:Number(t),season_id:Number(l),type:"poster",page:n,limit:20};try{let e=await q.getMediaDetails(R);e.status==200&&(p.value=!0,v.value=e.data.tv_season_meadia_list,v.value.forEach((_,T)=>{_.link=_.poster_image_link}),P.value.push(...v.value),C.value=e.data.total_records,u.value=e.data.season_name,k.value=e.data.title_poster_image,a.value=e.data.title_name,h.value=e.data.background_image?e.data.background_image:e.data.title_poster_image?e.data.title_poster_image:"",setTimeout(()=>{p.value=!1},1e3))}catch(e){console.warn(e)}},G=()=>{M.push({name:"AddNewTVDetails",params:{external_id:s,type:"internal"}}),localStorage.setItem("tvBackPage","/tvshows/details-media/"+s+"/"+l)},K=t=>{g.value=t,t=="mediaSection.images"&&L(s,1),t=="addNewPeople.mediadetails.videoTitle"&&E(s,1),t=="addNewMoviesForm.poster"&&A(s,1),D.value=[],V.value=[],P.value=[]},U=()=>{let t=document.documentElement.offsetHeight+document.documentElement.scrollTop>=document.documentElement.scrollHeight;if(g.value=="addNewPeople.mediadetails.videoTitle"&&t&&B.value>D.value.length){let n=++F.value;setTimeout(()=>{E(s,n)},100)}if(g.value=="mediaSection.images"&&t&&N.value>V.value.length){let n=++F.value;setTimeout(()=>{L(s,n)},100)}if(g.value=="addNewMoviesForm.poster"&&t&&C.value>P.value.length){let n=++F.value;setTimeout(()=>{A(s,n)},100)}};return ee(()=>{E(s,1)}),ae(()=>{window.addEventListener("scroll",U)}),te(()=>{window.removeEventListener("scroll",U)}),oe(()=>z.state.SelectedLang,function(t,n){t&&t!=n&&(g.value=="mediaSection.images"&&L(s,1),g.value=="addNewPeople.mediadetails.videoTitle"&&E(s,1),g.value=="addNewMoviesForm.poster"&&A(s,1),D.value=[],V.value=[],P.value=[])}),{videos:c,images:y,posters:v,videoCount:B,imageCount:N,posterCount:C,posterImage:k,title:a,toAddMediaVideo:G,background_image:h,season_name:u,newVideoResult:D,newImageResult:V,newPosterResult:P,selectedTab:K,onScroll:U,isData:p}}},ue={key:0},me={class:"container"},ce={class:"movies-media media__details"},ve={class:"mypage-rght"},_e={class:"media-heading"},ge={class:"tab-outr"},pe={key:0,class:"media-otr movies-media-outer"},fe={key:1,class:"no-data-wrapper"},we={key:0,class:"image-otr"},he={key:1,class:"no-data-wrapper"},Te={key:0,class:"image-otr"},be={key:1,class:"no-data-wrapper"};function ke(m,M,k,a,c,B){const y=b("BannerCardTwo"),N=b("VideoCard"),v=b("Tabs"),C=b("ImageCard"),s=b("PosterCard"),h=b("TabWrapper");return i(),d("div",null,[S(y,{bannerInfo:{imgUrl:a.posterImage,link:"TvShowsDetails",id:m.$route.params.id,background_image:a.background_image}},{default:I(()=>[r("h3",null,[se(f(a.title),1),a.season_name?(i(),d("span",ue,f(a.season_name),1)):w("v-if",!0)])]),_:1},8,["bannerInfo"]),r("div",me,[r("div",ce,[r("div",ve,[r("div",_e,[r("h2",null,f(m.$t("addNewMoviesForm.media")),1),r("button",{class:"edit-button",onClick:M[0]||(M[0]=(...l)=>a.toAddMediaVideo&&a.toAddMediaVideo(...l))},f(m.$t("general.editButton")),1)]),r("div",ge,[S(h,{onSelectedTab:a.selectedTab},{default:I(()=>[S(v,{title:"addNewPeople.mediadetails.videoTitle"},{default:I(()=>[a.newVideoResult.length>0?(i(),d("div",pe,[(i(!0),d(H,null,O(a.newVideoResult,(l,u)=>(i(),j(N,{key:u,video:l},null,8,["video"]))),128))])):w("v-if",!0),a.isData&&a.newVideoResult.length==0?(i(),d("div",fe,[r("p",null,f(m.$t("searchResults.noData")),1)])):w("v-if",!0)]),_:1}),S(v,{title:"mediaSection.images"},{default:I(()=>[a.newImageResult.length>0?(i(),d("div",we,[(i(!0),d(H,null,O(a.newImageResult,(l,u)=>(i(),j(C,{key:u,image:l},null,8,["image"]))),128))])):w("v-if",!0),a.isData&&a.newImageResult.length==0?(i(),d("div",he,[r("p",null,f(m.$t("searchResults.noData")),1)])):w("v-if",!0)]),_:1}),S(v,{title:"addNewMoviesForm.poster"},{default:I(()=>[a.newPosterResult.length>0?(i(),d("div",Te,[(i(!0),d(H,null,O(a.newPosterResult,(l,u)=>(i(),j(s,{key:u,poster:l},null,8,["poster"]))),128))])):w("v-if",!0),a.isData&&a.newPosterResult.length==0?(i(),d("div",be,[r("p",null,f(m.$t("searchResults.noData")),1)])):w("v-if",!0)]),_:1})]),_:1},8,["onSelectedTab"])])])])])])}const Se=Y(re,[["render",ke],["__file","D:/workspace/11-db-frontend/11_db/src/views/TvShows/TvShowMedia.vue"]]);export{Se as default};
