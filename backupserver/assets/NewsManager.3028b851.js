import{R as h,_ as v,aJ as k,r as _,o as l,c as r,p as y,a as t,k as f,t as a,w as L,v as N,F as S,s as M,l as I,b as V,ab as C,ac as P}from"./index.d6ed331f.js";const p={async getNewsManagerList(e){return h.post("admin/news/news-list",{...e})},async newsManagerUpdateStatus(e){return h.post("admin/news/news-status",{...e})}},U="/assets/nws-icon.d7d07449.svg";const x={name:"NewsManager",components:{Sidebar:k},inject:["common"],data(){return{newsList:[],search_text:"",page:1,total_news_records:0,limit:10,chunkPage:{chunk:5},status:""}},mounted(){localStorage.removeItem("site_language"),localStorage.removeItem("draft_ids"),this.getNewsList()},watch:{"common.state.SelectedLang":function(e,s){e&&e!=s&&this.getNewsList()}},methods:{clickInternalPage(e){this.page=e,this.getNewsList()},searchNewsList(){this.page=1,this.getNewsList()},newsUpdateStatus(e,s){e.target.checked==!0?this.status="active":this.status="inactive";let d={news_id:s.news_id,status:this.status};p.newsManagerUpdateStatus(d).then(c=>{c.status==200&&this.getNewsList()}).catch(c=>{})},getNewsList(){let e={search_text:this.search_text,page:this.page,limit:this.limit};p.getNewsManagerList(e).then(s=>{s.status==200&&(this.newsList=s.data.news_list,this.total_news_records=s.data.total_records)}).catch(s=>{})},resetList(){this.search_text="",this.page=1,this.getNewsList()}}},w=e=>(C("data-v-fbabc726"),e=e(),P(),e),B={class:"admin-otr"},D={class:"admin-right"},T={class:"heading"},F=w(()=>t("span",null,[t("img",{src:U,alt:""})],-1)),j={class:"cm-bck"},E={class:"frm-innr"},J={class:"form-group"},R=["placeholder"],$={class:"btn-group"},q=["value"],z={class:"cm-bck mt-30"},A={class:"table-otr"},G={class:"switch-innr"},H={class:"switch"},K=["onClick","checked"],O=w(()=>t("small",null,null,-1)),Q={key:1},W={colspan:"3",class:"center"};function X(e,s,d,c,i,o){var u;const g=_("Sidebar"),m=_("pagination");return l(),r("div",B,[y(g),t("div",D,[t("h2",T,[F,f(a(e.$t("dictionary.news.title")),1)]),t("div",j,[t("h3",null,a(e.$t("button.search")),1),t("div",E,[t("div",J,[t("label",null,a(e.$t("dictionary.news.keyword")),1),L(t("input",{type:"text",placeholder:e.$t("dictionary.news.keywordText"),class:"form-control","onUpdate:modelValue":s[0]||(s[0]=n=>i.search_text=n)},null,8,R),[[N,i.search_text]])]),t("div",$,[t("input",{type:"submit",class:"btn org-btn",value:e.$t("button.search"),onClick:s[1]||(s[1]=(...n)=>o.searchNewsList&&o.searchNewsList(...n))},null,8,q),t("button",{type:"button",class:"btn outline blk-btn",onClick:s[2]||(s[2]=n=>o.resetList())},a(e.$t("button.reset")),1)])])]),t("div",z,[t("h3",null,a(e.$t("dictionary.news.newsList")),1),t("table",A,[t("thead",null,[t("tr",null,[t("th",null,a(e.$t("dictionary.news.keyword")),1),t("th",null,a(e.$t("dictionary.news.date")),1),t("th",null,a(e.$t("dictionary.news.activeInactive")),1)])]),t("tbody",null,[i.newsList.length>0?(l(!0),r(S,{key:0},M(i.newsList,n=>(l(),r("tr",{key:n.news_id},[t("td",null,a(n.news_keyword),1),t("td",null,a(n.news_publish_date),1),t("td",null,[t("div",G,[t("label",H,[t("input",{type:"checkbox",onClick:b=>o.newsUpdateStatus(b,n),checked:n.news_status=="active"},null,8,K),O])])])]))),128)):(l(),r("tr",Q,[t("td",W,[t("p",null,a(e.$t("dictionary.noData")),1)])]))])]),((u=i.newsList)==null?void 0:u.length)>0?(l(),I(m,{key:0,modelValue:i.page,"onUpdate:modelValue":s[3]||(s[3]=n=>i.page=n),records:i.total_news_records,"per-page":i.limit,options:i.chunkPage,onPaginate:o.clickInternalPage},null,8,["modelValue","records","per-page","options","onPaginate"])):V("v-if",!0)])])])}const Z=v(x,[["render",X],["__scopeId","data-v-fbabc726"],["__file","D:/11-db-frontend/11_db/src/admin/views/News/NewsManager.vue"]]);export{Z as default};
