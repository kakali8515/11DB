import{_ as x,aJ as E,r as p,o as c,c as u,p as m,a as t,k as a,t as o,w as g,v as w,aK as y,F as C,s as D,l as B,b as V}from"./index.d6ed331f.js";import{B as b}from"./BulkExportAndWorkListService.2295a247.js";import{C as P}from"./Calender.32f04616.js";import{_ as h}from"./ud-arrow-icon.5808a584.js";const $="/assets/export-icon.f72b3f3c.svg",S="/assets/download-icon-wh.5008cac1.svg",N={name:"ExportList",components:{Sidebar:E,Calender:P},inject:["common"],data(){return{page:1,limit:10,exportList:[],search_file_name:"",search_date:"",total_records:0,chunkPage:{chunk:5},baseUrl:"https://elvndb-api.dvconsulting.org/api/v1/",datePlaceholder:this.$t("bulk.export.searchbydate"),sort_by:"",sort_order:""}},mounted(){this.getExportList(),this.dateformat()},watch:{"common.state.SelectedLang":function(e,s){e&&e!=s&&this.getExportList()}},methods:{getRealeaseDate(e){this.search_date=e},clickInternalPage(e){this.page=e,this.getExportList()},dateformat(e){if(e)return moment.utc(e).format("YYYY-MM-DD")},searchExportList(){this.page=1,this.getExportList()},resetAll(){this.search_file_name="",this.search_date="",this.page=1,this.getExportList()},getExportListByValue(){this.page=1,this.getExportList()},getExportList(){let e={search_file_name:this.search_file_name,search_date:this.search_date,page:this.page,limit:this.limit,sort_by:this.sort_by,sort_order:this.sort_order};b.getExportList(e).then(s=>{if(s.status==200){this.exportList=s.data.results;for(let i=0;i<this.exportList.length;i++)this.exportList[i].no=(this.page-1)*this.limit+i+1;this.total_records=s.data.total_records}}).catch(s=>{})},downloadExportData(e){b.downloadExportData(e).then(s=>{if(s.status==200){const i=`${this.baseUrl}/download/file?url=${s.data.path}&ul=false`,d=document.createElement("a");d.href=i,d.setAttribute("download","DataBackup"),document.body.appendChild(d),d.click()}}).catch(s=>{})},sorting(e){this.sort_by!=e?(this.sort_by=e,this.sort_order="asc"):this.sort_order=="asc"?this.sort_order="desc":this.sort_order="asc",this.getExportList()}}},U={class:"admin-otr"},M={class:"admin-right"},Y={class:"heading"},A=t("span",null,[t("img",{src:$,alt:""})],-1),T={class:"cm-bck"},F={class:"frm-innr w-100"},I={class:"row-3"},R={class:"form-group"},W=["placeholder"],j={class:"form-group"},J={class:"input-date"},K={class:"btn-group"},q=["value"],z={class:"cm-bck mt-30"},G={class:"material-sort"},H={class:"sort-innr"},O={class:"frm-innr"},Q={class:"form-group"},X={class:"table-inner-scroll"},Z={class:"table-otr table-innr bulk-working-tbl"},tt={class:"data-hdr"},et=t("img",{src:h,alt:""},null,-1),st=[et],ot={class:"data-hdr"},lt=t("img",{src:h,alt:""},null,-1),nt=[lt],rt={class:"data-hdr"},it=t("img",{src:h,alt:""},null,-1),at=[it],dt={class:"data-hdr"},ct=t("img",{src:h,alt:""},null,-1),ut=[ct],ht=["value"],pt={class:"date-time"},_t={class:"status-btn green"},mt=["onClick"],gt=t("span",null,[t("img",{src:S,alt:""})],-1),bt={key:1},kt={colspan:"6",class:"center"};function ft(e,s,i,d,n,r){var _;const k=p("Sidebar"),f=p("Calender"),v=p("pagination");return c(),u("div",U,[m(k),t("div",M,[t("h2",Y,[A,a(o(e.$t("bulk.export.header")),1)]),t("div",T,[t("h3",null,o(e.$t("button.search")),1),t("div",F,[t("div",I,[t("div",R,[t("label",null,o(e.$t("bulk.worklist.title")),1),g(t("input",{type:"text",placeholder:e.$t("bulk.export.titleText"),class:"form-control","onUpdate:modelValue":s[0]||(s[0]=l=>n.search_file_name=l)},null,8,W),[[w,n.search_file_name]])]),t("div",j,[t("label",null,o(e.$t("dictionary.news.date")),1),t("div",J,[m(f,{onDate:r.getRealeaseDate,input_date:n.search_date,datePlaceholder:n.datePlaceholder},null,8,["onDate","input_date","datePlaceholder"])])])])]),t("div",K,[t("input",{type:"submit",class:"btn org-btn",value:e.$t("button.search"),onClick:s[1]||(s[1]=l=>r.searchExportList())},null,8,q),t("button",{type:"button",class:"btn outline blk-btn",onClick:s[2]||(s[2]=l=>r.resetAll())},o(e.$t("button.reset")),1)])]),t("div",z,[t("h3",null,o(e.$t("bulk.export.exportList")),1),t("div",G,[t("div",H,[t("p",null,o(e.$t("bulk.worklist.total"))+" "+o(n.total_records),1),t("div",O,[t("div",Q,[g(t("select",{class:"form-control","onUpdate:modelValue":s[3]||(s[3]=l=>n.limit=l),onChange:s[4]||(s[4]=(...l)=>r.getExportListByValue&&r.getExportListByValue(...l))},[t("option",null,o(e.$t("bulk.export.pageLimit10")),1),t("option",null,o(e.$t("bulk.export.pageLimit20")),1),t("option",null,o(e.$t("bulk.export.pageLimit50")),1)],544),[[y,n.limit]])])])])]),t("div",X,[t("table",Z,[t("thead",null,[t("tr",null,[t("th",null,o(e.$t("bulk.worklist.no")),1),t("th",null,[t("div",tt,[a(o(e.$t("bulk.export.fileName"))+" ",1),t("span",{onClick:s[5]||(s[5]=l=>r.sorting("file_name"))},st)])]),t("th",null,[t("div",ot,[a(o(e.$t("bulk.export.creationDate"))+" ",1),t("span",{onClick:s[6]||(s[6]=l=>r.sorting("creation_date"))},nt)])]),t("th",null,[t("div",rt,[a(o(e.$t("bulk.export.message"))+" ",1),t("span",{onClick:s[7]||(s[7]=l=>r.sorting("message"))},at)])]),t("th",null,[t("div",dt,[a(o(e.$t("bulk.export.status"))+" ",1),t("span",{onClick:s[8]||(s[8]=l=>r.sorting("status"))},ut)])]),t("th",null,o(e.$t("bulk.export.download")),1)])]),t("tbody",null,[n.exportList.length>0?(c(!0),u(C,{key:0},D(n.exportList,(l,L)=>(c(),u("tr",{key:L,value:l.id},[t("td",null,o(l.no),1),t("td",null,o(l.file_name),1),t("td",null,[t("ul",pt,[t("li",null,o(l.creation_date.replace(/-/gi,".")),1)])]),t("td",null,o(l.message),1),t("td",null,[t("span",_t,o(l.status=="success"?e.$t("Error.success"):l.status==e.$t("Error.success")),1)]),t("td",null,[t("a",{onClick:vt=>r.downloadExportData(l.id),class:"download-btn btn org-btn"},[gt,a(" "+o(e.$t("bulk.export.download")),1)],8,mt)])],8,ht))),128)):(c(),u("tr",bt,[t("td",kt,[t("p",null,o(e.$t("dictionary.noData")),1)])]))])])]),((_=n.exportList)==null?void 0:_.length)>0?(c(),B(v,{key:0,modelValue:n.page,"onUpdate:modelValue":s[9]||(s[9]=l=>n.page=l),records:n.total_records,"per-page":n.limit,options:n.chunkPage,onPaginate:r.clickInternalPage},null,8,["modelValue","records","per-page","options","onPaginate"])):V("v-if",!0)])])])}const yt=x(N,[["render",ft],["__file","D:/11-db-frontend/11_db/src/admin/views/BulkWorking/ExportList.vue"]]);export{yt as default};
