import{_ as D,aJ as I,P as w,ay as A,r as g,o as d,c as u,a as t,p as h,k as l,t as o,w as b,v as P,aK as V,F as p,s as M,l as B,b as C,q as v}from"./index.3434c1c6.js";import{D as c,_ as U}from"./tag-data.881ff6aa.js";import{_}from"./ud-arrow-icon.5808a584.js";const N="/assets/download-icon.db6fd8f9.svg",$="/assets/edit-icon.22030122.svg",E="/assets/delete-icon.fb0a1dd8.svg",F={name:"TagData",emits:["on-current-theme-change"],components:{Sidebar:I,PopUpModal:w},inject:["common"],data(){return{adminCategoryList:[],subCategoryList:[],currentCategoryId:null,currentSubcategoryId:null,page:1,limit:10,total_news_records:0,tagList:[],chunkPage:{chunk:5},baseUrl:"https://elvndb-api.dvconsulting.org/api/v1/",isDelete:!1,currentTagId:0,tag_name:"",sort_by:"",sort_order:""}},mounted(){this.getAdminDictionaryCategoryList(),this.getTagList()},watch:{"common.state.SelectedLang":function(e,s){e&&e!=s&&this.getTagList(),this.getAdminDictionaryCategoryList()}},methods:{navigate(e){this.$router.push({name:e})},getSubCat(e){this.currentSubcategoryId=e},clickInternalPage(e){this.page=e,this.getTagList()},displayListing(){this.page=1,this.getTagList()},getCurrentcategoryId(e){this.currentCategoryId=e,this.currentSubcategoryId=null,this.subCategoryList=[],this.currentCategoryId&&this.getSubCategoryList()},searchTagList(){this.page=1,this.getTagList()},getTagList(){let e={category_id:this.currentCategoryId,sub_category_id:this.currentSubcategoryId,tag_name:this.tag_name,page:this.page,limit:this.limit,sort_by:this.sort_by,sort_order:this.sort_order};c.getTagList(e).then(s=>{if(s.status==200){this.tagList=s.data.result;for(let r=0;r<this.tagList.length;r++)this.tagList[r].no=(this.page-1)*this.limit+r+1;this.total_news_records=s.data.total_records}}).catch(s=>{})},resetAll(){this.tag_name="",this.currentCategoryId=null,this.currentSubcategoryId=null,this.page=1,this.getAdminDictionaryCategoryList(),this.getTagList()},downloadTagData(){c.downloadTagData(this.currentCategoryId,this.currentSubcategoryId,this.tag_name).then(e=>{if(e.status==200){const s=`${this.baseUrl}/download/file?url=${e.data.path}&ul=false`,r=document.createElement("a");r.href=s,r.setAttribute("download","DataBackup"),document.body.appendChild(r),r.click()}}).catch(e=>{})},getAdminDictionaryCategoryList(){c.getAdminDictionaryCategoryList().then(e=>{e.status==200&&(this.adminCategoryList=e.data.results)}).catch(e=>{})},getSubCategoryList(){c.getSubCategoryList(this.currentCategoryId).then(e=>{if(e.status==200){const s=e.data.results.map(r=>(r.category_name.length>50&&(r.category_name=r.category_name.slice(0,50)+"..."),r));this.subCategoryList=s}}).catch(e=>{})},editTag(e){this.$router.push({name:"EditTag",params:{id:e.tag_id}})},openDeletePopup(e){this.currentTagId=e.tag_id,this.isDelete=!0},deleteTag(){this.isDelete=!1;let e={tag_id:this.currentTagId};c.deleteTag(e).then(s=>{s.status==200&&this.getTagList()}).catch(s=>{})},sorting(e){this.sort_by!=e?(this.sort_by=e,this.sort_order="asc"):this.sort_order=="asc"?this.sort_order="desc":this.sort_order="asc",this.getTagList()},isChar:A}},K={class:"admin-otr"},j={class:"admin-right"},q={class:"heading"},J=t("span",null,[t("img",{src:U,alt:""})],-1),z={class:"cm-bck"},G={class:"frm-innr"},H={class:"form-group"},O={class:"form-group"},Q={class:"form-group"},R=["placeholder"],W={class:"btn-group"},X=["value"],Y={class:"cm-bck mt-30"},Z={class:"material-filter-list"},x={class:"btn-group"},tt={class:"material-sort"},et={class:"sort-innr"},st={class:"frm-innr"},at={class:"form-group"},ot=t("option",null,"10",-1),nt=t("option",null,"20",-1),it=t("option",null,"25",-1),rt=[ot,nt,it],lt=t("span",null,[t("img",{src:N,alt:""})],-1),dt={class:"table-inner-scroll"},ct={class:"table-otr table-innr"},gt=t("th",null,"#",-1),ut={class:"data-hdr"},ht=t("img",{src:_,alt:""},null,-1),_t=[ht],mt={class:"data-hdr"},yt=t("img",{src:_,alt:""},null,-1),bt=[yt],pt={class:"data-hdr"},Ct=t("img",{src:_,alt:""},null,-1),vt=[Ct],Lt={class:"data-hdr"},ft=t("img",{src:_,alt:""},null,-1),Tt=[ft],kt={class:"action"},St=["onClick"],Dt=t("img",{src:$,alt:""},null,-1),It=[Dt],wt=["onClick"],At=t("img",{src:E,alt:""},null,-1),Pt=[At],Vt={key:1},Mt={colspan:"6"},Bt={class:"new-cast-modal center-popup-modal"},Ut={class:"cast-details"},Nt={class:"button-group"};function $t(e,s,r,Et,i,n){var y;const L=g("Sidebar"),m=g("SearchDropdown"),f=g("pagination"),T=g("PopUpModal");return d(),u(p,null,[t("div",K,[h(L),t("div",j,[t("h2",q,[J,l(o(e.$t("dictionary.tagTitle")),1)]),t("div",z,[t("h3",null,o(e.$t("dictionary.tagSearch.title")),1),t("div",G,[t("div",H,[t("label",null,o(e.$t("dictionary.addTag.mainCategory")),1),h(m,{onDropdownValue:n.getCurrentcategoryId,search_type:i.currentCategoryId,searchTitleListItem:i.adminCategoryList,searchtitle:"category_name",searchvalue:"category_id",labelItem:e.$t("dictionary.select")},null,8,["onDropdownValue","search_type","searchTitleListItem","labelItem"])]),t("div",O,[t("label",null,o(e.$t("dictionary.addTag.subCategory")),1),h(m,{onDropdownValue:n.getSubCat,search_type:i.currentSubcategoryId,searchTitleListItem:i.subCategoryList,searchtitle:"category_name",searchvalue:"sub_category_id",labelItem:e.$t("dictionary.select")},null,8,["onDropdownValue","search_type","searchTitleListItem","labelItem"])]),t("div",Q,[t("label",null,o(e.$t("dictionary.tagSearch.tagName")),1),b(t("input",{type:"text",placeholder:e.$t("Error.enterTag"),class:"form-control","onUpdate:modelValue":s[0]||(s[0]=a=>i.tag_name=a),onKeypress:s[1]||(s[1]=a=>n.isChar(a))},null,40,R),[[P,i.tag_name]])]),t("div",W,[t("input",{type:"submit",class:"btn org-btn",value:e.$t("button.search"),onClick:s[2]||(s[2]=(...a)=>n.searchTagList&&n.searchTagList(...a))},null,8,X),t("button",{type:"button",class:"btn outline blk-btn",onClick:s[3]||(s[3]=(...a)=>n.resetAll&&n.resetAll(...a))},o(e.$t("button.reset")),1)])])]),t("div",Y,[t("div",Z,[t("h3",null,o(e.$t("dictionary.tagSearch.materialList")),1),t("div",x,[t("button",{type:"button",class:"btn org-btn",onClick:s[4]||(s[4]=a=>n.navigate("AddMainCategory"))},o(e.$t("dictionary.tagSearch.addMainCategoryButton")),1),t("button",{type:"button",class:"btn outline blk-btn",onClick:s[5]||(s[5]=a=>n.navigate("AddSubCategory"))},o(e.$t("dictionary.tagSearch.addSubCategoryButton")),1),t("button",{type:"button",class:"btn outline blk-btn",onClick:s[6]||(s[6]=a=>n.navigate("AddTag"))},o(e.$t("dictionary.tagSearch.addTagButton")),1)])]),t("div",tt,[t("div",et,[t("p",null,o(e.$t("dictionary.agentList.total"))+" "+o(i.total_news_records),1),t("div",st,[t("div",at,[b(t("select",{class:"form-control","onUpdate:modelValue":s[7]||(s[7]=a=>i.limit=a),onChange:s[8]||(s[8]=a=>n.displayListing(a))},rt,544),[[V,i.limit]])])])]),t("button",{type:"button",class:"btn outline blk-btn",onClick:s[9]||(s[9]=a=>n.downloadTagData())},[lt,l(o(e.$t("dictionary.tagSearch.downlaod")),1)])]),t("div",dt,[t("table",ct,[t("thead",null,[t("tr",null,[gt,t("th",null,[t("div",ut,[l(o(e.$t("dictionary.tagSearch.mainCategory"))+" ",1),t("span",{onClick:s[10]||(s[10]=a=>n.sorting("category_name"))},_t)])]),t("th",null,[t("div",mt,[l(o(e.$t("dictionary.tagSearch.subCategory"))+" ",1),t("span",{onClick:s[11]||(s[11]=a=>n.sorting("sub_category_name"))},bt)])]),t("th",null,[t("div",pt,[l(o(e.$t("dictionary.tagSearch.englishTagName"))+" ",1),t("span",{onClick:s[12]||(s[12]=a=>n.sorting("tag_name_en"))},vt)])]),t("th",null,[t("div",Lt,[l(o(e.$t("dictionary.tagSearch.koreanTagName"))+" ",1),t("span",{onClick:s[13]||(s[13]=a=>n.sorting("tag_name_ko"))},Tt)])]),t("th",null,o(e.$t("dictionary.tagSearch.action")),1)])]),t("tbody",null,[i.tagList.length>0?(d(!0),u(p,{key:0},M(i.tagList,(a,k)=>(d(),u("tr",{key:k},[t("td",null,o(a.no),1),t("td",null,o(a.category_name),1),t("td",null,o(a.sub_category_name),1),t("td",null,o(a.tag_name_en),1),t("td",null,o(a.tag_name_ko),1),t("td",null,[t("div",kt,[t("a",{onClick:S=>n.editTag(a)},It,8,St),t("a",{onClick:S=>n.openDeletePopup(a)},Pt,8,wt)])])]))),128)):(d(),u("tr",Vt,[t("td",Mt,[t("p",null,o(e.$t("dictionary.noData")),1)])]))])])]),((y=i.tagList)==null?void 0:y.length)>0?(d(),B(f,{key:0,modelValue:i.page,"onUpdate:modelValue":s[14]||(s[14]=a=>i.page=a),records:i.total_news_records,"per-page":i.limit,options:i.chunkPage,onPaginate:n.clickInternalPage},null,8,["modelValue","records","per-page","options","onPaginate"])):C("v-if",!0)])])]),C(" delete tag "),t("div",Bt,[h(T,{isModal:i.isDelete},{body:v(()=>[t("div",Ut,[t("p",null,o(e.$t("dictionary.tagSearch.delete")),1)])]),footer:v(()=>[t("div",Nt,[t("button",{class:"red-fill-btn",onClick:s[15]||(s[15]=(...a)=>n.deleteTag&&n.deleteTag(...a))},o(e.$t("button.delete")),1),t("button",{class:"black-outline-btn",onClick:s[16]||(s[16]=a=>i.isDelete=!1)},o(e.$t("button.cancel")),1)])]),_:1},8,["isModal"])])],64)}const qt=D(F,[["render",$t],["__file","D:/workspace/11-db-frontend/11_db/src/admin/views/Dictionary/TagData.vue"]]);export{qt as default};
